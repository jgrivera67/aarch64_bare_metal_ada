'
' UML diagrams
'
' NOTE: To generate .svg files for the diagrams run 'plantuml -tsvg' on this file.
' To generate .latex files run 'plantuml -tlatex on this file.
' To render the diagrams, run 'plantuml -gui' on this file.
'
' author: German Rivera
'

'
' UML sequence diagram representing the HiRTOS scheduler invocation from interrupts
'
@startuml raspberrypi4_boot_sequence

'title RaspberryPI 4 Boot Sequence

actor "Power On Board"
"Power On Board" -> "ROM" : Boot first-stage bootloader
activate "ROM"
   "ROM" -> "SPI EEPROM" : Boot second-stage bootloader
   activate "SPI EEPROM"
      "SPI EEPROM" -> "SPI EEPROM" : Initialize DRAM
      activate "SPI EEPROM"
      deactivate "SPI EEPROM"
      "SPI EEPROM" -> "start.elf on SD card" : Boot OS bootloader
      activate "start.elf on SD card"
         "start.elf on SD card" -> "kernel8.img on SD card" : Boot AArch64 Bare-meta Ada program to DRAM
         activate "kernel8.img on SD card"
            "kernel8.img on SD card" -> "kernel8.img on SD card" : reset_handler
            activate "kernel8.img on SD card"
               "kernel8.img on SD card" -> "kernel8.img on SD card" : main generated by gnatbind
               activate "kernel8.img on SD card"
                  "kernel8.img on SD card" -> "kernel8.img on SD card" : Ada main subprogram
                  activate "kernel8.img on SD card"
                  deactivate "kernel8.img on SD card"
               deactivate "kernel8.img on SD card"
            deactivate "kernel8.img on SD card"
         deactivate "kernel8.img on SD card"
      deactivate "start.elf on SD card"
   deactivate "SPI EEPROM"
deactivate "ROM"
@enduml
